drop database if exists bank;
create database bank;
use bank;

create table user(
	uno int auto_increment ,				-- 회원 번호 
    u_id varchar(20) not null unique,		-- 회원 아이디
    u_pwd varchar(100) not null ,			-- 회원 비밀번호
    u_name varchar(20) not null ,			-- 회원 이름
    u_phone varchar(20) not null ,			-- 회원 전화번호
    u_email varchar(100) not null ,			-- 회원 이메일
    u_date date not null,					-- 회원 생년월일
    constraint primary key (uno)			-- 회원 번호 pk로 설정
);

select * from user;

create table account(
	acno int auto_increment ,				-- 계좌 로그 번호 
    uno int not null ,						-- 회원 번호
    account_no varchar(30) not null unique, -- 계좌 번호
    account_pwd varchar(20) not null,		-- 계좌 비밀번호
    constraint primary key (acno),			-- 계좌 로그 번호 (pk)
    constraint foreign key (uno) references user(uno) on update cascade on delete cascade
);

select * from account;

create table transaction(
	tno int auto_increment ,								-- 내역 로그 번호
    from_acno int not null ,								-- 출금 계좌 로그 번호
    to_acno int not null ,									-- 입금 계좌 로그번호
    amount bigint not null ,								-- 거래 금액
	type ENUM('입금', '출금','이체', '이체_출금', '이체_입금') NOT null,	-- 거래 유형: 입금 / 출금 / 이체_출금 / 이체_입금
	memo varchar(100) ,										-- 거래 메모
    t_date datetime not null default CURRENT_TIMESTAMP, 	-- 입/출금 날짜
    constraint primary key (tno),							-- 내역 로그번호 pk
	foreign key (from_acno) references account(acno),		-- 출금계좌 fk
    foreign key (to_acno) references account(acno)			-- 입금계좌 fk
);

select * from transaction;


ALTER TABLE account AUTO_INCREMENT = 1000;					-- acno 1000부터
ALTER TABLE transaction AUTO_INCREMENT = 10000;				-- tno 10000부터

INSERT INTO user (u_id, u_pwd, u_name, u_phone, u_email, u_date) VALUES
('admin','admin1234','은행','02-1234-1234','bankserviceproject@gmail.com','2025-07-31'),
('user02','5p4n1z6x','정재성','010-5495-1353','user02@example.com','1992-11-20'),
('user03','k2c3z4j7','장현우','010-3206-5609','user03@example.com','1999-08-20'),
('user04','j4y3z7h0','윤성현','010-6278-4043','user04@example.com','1986-11-02'),
('user05','d0r8b9s1','전민우','010-4785-8774','user05@example.com','1997-11-05'),
('user06','e6k1p5t2','강지현','010-3235-6209','user06@example.com','1985-03-28'),
('user07','d9m3l5w1','한재현','010-7117-2043','user07@example.com','1990-07-19'),
('user08','5l0q8v2n','전현우','010-9291-6815','user08@example.com','1990-07-07'),
('user09','8x7u2f0m','이서현','010-5484-3072','user09@example.com','1976-06-13'),
('user10','o4c1n2j5','윤재성','010-2992-7863','user10@example.com','1998-11-26'),
('user11','f3v6s9b2','장도현','010-6458-9375','user11@example.com','1988-05-24'),
('user12','s3v3r7t0','김성재','010-7927-0455','user12@example.com','1975-09-26'),
('user13','h0k8m1q5','류지현','010-5266-5919','user13@example.com','1988-10-31'),
('user14','r8c4z2b1','조민재','010-2134-7661','user14@example.com','2005-05-29'),
('user15','p5w9n0k3','신현우','010-5342-9581','user15@example.com','1973-05-11'),
('user16','a9t2x6f7','김재현','010-4313-2859','user16@example.com','1983-12-14'),
('user17','h1m4z9q6','이도윤','010-5147-0928','user17@example.com','1990-08-15'),
('user18','c6v5p2n8','정서윤','010-3791-5120','user18@example.com','1995-01-16'),
('user19','n7k3b0r2','황성우','010-8141-8568','user19@example.com','1983-04-06'),
('user20','t8x1d5m3','안지후','010-4198-7432','user20@example.com','1997-03-05'),
('user21','w0p6f2v9','최현우','010-9884-6317','user21@example.com','1998-05-19'),
('user22','q2z9r4k1','김서윤','010-8107-4902','user22@example.com','1981-06-08'),
('user23','y5n1t7b3','장지후','010-5173-2984','user23@example.com','1999-12-30'),
('user24','v6r8m2p0','이수빈','010-2509-6173','user24@example.com','1986-08-02'),
('user25','x3b7k9n5','한지우','010-3741-8560','user25@example.com','1990-06-18'),
('user26','s1v4t8q2','김민재','010-6802-1953','user26@example.com','1992-03-27'),
('user27','e7p9c1x4','안서현','010-2915-6438','user27@example.com','2000-12-10'),
('user28','z2w5n6m8','정도윤','010-6723-8541','user28@example.com','1989-11-30'),
('user29','p3x1r7v9','서현우','010-9071-3204','user29@example.com','1972-11-23'),
('user30','b0m2k8f5','최서윤','010-5487-0019','user30@example.com','1994-07-30'),
('user31','g4t9v1p3','류재민','010-4382-9506','user31@example.com','1984-05-05'),
('user32','l1n8x7d0','조도현','010-7943-2167','user32@example.com','1999-02-14'),
('user33','c9p2v5r4','박서윤','010-2165-8039','user33@example.com','1988-08-29'),
('user34','j6m3t9w2','송지훈','010-5730-4192','user34@example.com','2004-03-08'),
('user35','y8k1n4d7','한지후','010-6429-3705','user35@example.com','1980-02-13'),
('user36','r2v7x5p6','정예진','010-1870-5493','user36@example.com','1987-09-25'),
('user37','d5n3w8k1','이정민','010-9540-6312','user37@example.com','1993-01-21'),
('user38','m7p2r9v4','김도현','010-2038-5791','user38@example.com','1996-08-04'),
('user39','f1x8t3n5','안성우','010-8217-4609','user39@example.com','1991-10-10'),
('user40','k3z6p1r8','장예린','010-3758-2094','user40@example.com','1977-02-28'),
('user41','h9v4m2x1','류하늘','010-6991-4358','user41@example.com','2003-06-04'),
('user42','n5d8t0r3','김소희','010-5820-7916','user42@example.com','1985-09-15'),
('user43','c0p7x4v9','서지은','010-4692-1508','user43@example.com','1998-01-07'),
('user44','q6m1n8b2','최도윤','010-8037-2561','user44@example.com','1990-12-23'),
('user45','b9x3r7t4','정채영','010-2519-6478','user45@example.com','1982-01-18'),
('user46','v2k5p8n1','안재민','010-9348-0726','user46@example.com','1997-11-11'),
('user47','w7f0x2r9','한성우','010-6904-8512','user47@example.com','1984-07-02'),
('user48','z3n6t1v5','이도영','010-1473-9208','user48@example.com','1996-03-29'),
('user49','l8p4r0x2','신지우','010-3582-7043','user49@example.com','1975-08-21'),
('user50','r0v9k5m3','김윤지','010-7201-6497','user50@example.com','1999-10-27'),
('user51','t1x7n4p8','임서현','010-6543-2819','user51@example.com','1981-06-09'),
('user52','f8p2v7r0','박하늘','010-8923-5407','user52@example.com','2002-05-16'),
('user53','s9m3x1d6','정지훈','010-4379-8062','user53@example.com','1995-07-01'),
('user54','k0r6n8t2','류소희','010-5140-2795','user54@example.com','1983-03-12'),
('user55','d7v1p5x9','안지후','010-2681-9374','user55@example.com','1992-09-09'),
('user56','m2x8f3r6','이수빈','010-9785-4012','user56@example.com','1987-01-22'),
('user57','p4n9k7b1','최서진','010-5036-2189','user57@example.com','1993-04-27'),
('user58','h3v0x2t5','박민재','010-6794-1583','user58@example.com','1979-11-08'),
('user59','b6r1n8p4','정예린','010-8302-4971','user59@example.com','2001-02-02'),
('user60','x5m3v9d1','김도영','010-4127-8036','user60@example.com','1986-12-05'),
('user61','z4p7r2x9','윤지후','010-2957-6408','user61@example.com','1994-04-28'),
('user62','j2k8n5v0','강서윤','010-7481-3902','user62@example.com','1980-09-03'),
('user63','c1t7x4m5','박서영','010-8920-5713','user63@example.com','1997-02-14'),
('user64','v8n0p3r6','신예린','010-5172-6849','user64@example.com','1989-05-26'),
('user65','g5x1d9t2','임하늘','010-6038-2491','user65@example.com','2000-08-30'),
('user66','p9r4v0k7','서유진','010-2195-8073','user66@example.com','1982-10-01'),
('user67','t3m6n1x8','류정민','010-4307-9652','user67@example.com','1991-01-05'),
('user68','w2k9p5v4','안서윤','010-8674-3250','user68@example.com','1978-07-16'),
('user69','y7x0r3n1','장성우','010-3951-7806','user69@example.com','1996-09-13'),
('user70','d8p2v6m0','김채린','010-2869-1457','user70@example.com','1984-02-22'),
('rufp9801','test1234!','이겨레','010-8749-1651','rufp9891@gmail.com','1998-01-01');

INSERT INTO account (uno, account_no, account_pwd) VALUES
(1,'111-100-203123','123456'),	-- 입출 출금시 default 해야할 admin 계좌번호! 
(1,'111-100-202122','123456'),
(2,'111-228-586525','563381'),
(3,'111-281-306773','365079'),
(4,'111-221-810152','649208'),
(5,'111-274-182463','890083'),
(6,'111-221-459373','985095'),
(7,'111-286-575566','600222'),
(8,'111-216-564589','341975'),
(9,'111-261-914231','368347'),
(10,'111-203-413038','395059'),
(11,'111-228-942200','657601'),
(12,'111-281-809499','936453'),
(13,'111-257-697132','497187'),
(14,'111-293-174909','903201'),
(15,'111-231-229338','378607'),
(16,'111-219-985714','554741'),
(17,'111-231-606710','106869'),
(18,'111-245-922835','812251'),
(19,'111-251-582069','634942'),
(20,'111-221-420671','988448'),
(21,'111-205-794311','796642'),
(22,'111-280-562315','874396'),
(23,'111-220-540927','878235'),
(24,'111-241-829793','580075'),
(25,'111-224-424960','707249'),
(26,'111-261-724096','582865'),
(27,'111-215-507032','616404'),
(28,'111-209-367086','724666'),
(29,'111-213-635095','670868'),
(30,'111-206-467559','859734'),
(31,'111-207-781206','145983'),
(32,'111-296-132420','328196'),
(33,'111-272-638956','939152'),
(34,'111-269-965428','865217'),
(35,'111-282-352680','170826'),
(36,'111-250-920535','543181'),
(37,'111-215-192633','285948'),
(38,'111-248-801392','719103'),
(39,'111-285-514620','603418'),
(40,'111-204-253960','674380'),
(41,'111-208-183302','729843'),
(42,'111-226-494301','222178'),
(43,'111-291-617195','155638'),
(44,'111-229-384476','420937'),
(45,'111-217-960445','859712'),
(46,'111-255-710508','537126'),
(47,'111-284-388157','318780'),
(48,'111-266-901203','709182'),
(49,'111-279-587645','231035'),
(50,'111-268-150499','937240'),
(51,'111-289-402166','837216'),
(52,'111-276-680368','416090'),
(53,'111-295-135207','289408'),
(54,'111-263-598210','330532'),
(55,'111-218-479809','708361'),
(56,'111-270-921300','969241'),
(57,'111-267-735020','247135'),
(58,'111-210-349756','429873'),
(59,'111-222-151274','148390'),
(60,'111-239-465395','667009'),
(61,'111-278-845126','380902'),
(62,'111-253-613748','268315'),
(63,'111-259-472316','902653'),
(64,'111-246-867530','712395'),
(65,'111-265-917648','356749'),
(66,'111-230-398254','281347'),
(67,'111-262-834195','453601'),
(68,'111-277-675142','139705'),
(69,'111-258-342809','560127'),
(70,'111-294-130376','693842'),
(71,'111-123-1234','111111')
;


INSERT INTO transaction (from_acno, to_acno, amount, type, memo, t_date) VALUES
(1001, 1000, 10000000000, '이체', '테스트 돈 입금', '2025-07-01 08:15:23'),
(1002, 1003, 42000, '입금', '급여 입금', '2025-07-01 09:10:45'),
(1004, 1005, 15000, '출금', '식비 지출', '2025-07-02 11:05:30'),
(1006, 1007, 23000, '이체_출금', '자동차 보험료', '2025-07-02 14:20:10'),
(1008, 1009, 47000, '입금', '보너스 지급', '2025-07-03 10:50:00'),
(1010, 1011, 22000, '출금', '외식비', '2025-07-03 16:25:50'),
(1012, 1013, 36000, '이체_출금', '학원비 납부', '2025-07-04 09:40:35'),
(1014, 1015, 51000, '입금', '대출 상환', '2025-07-04 13:15:12'),
(1016, 1017, 27000, '출금', '교통비', '2025-07-05 08:55:18'),
(1018, 1019, 31000, '이체_출금', '용돈 송금', '2025-07-05 17:30:27'),
(1020, 1021, 42000, '입금', '급여 입금', '2025-07-06 10:15:22'),
(1022, 1023, 19000, '출금', '커피값', '2025-07-06 12:40:11'),
(1024, 1025, 38000, '이체_출금', '병원비', '2025-07-07 11:05:49'),
(1026, 1027, 45000, '입금', '상여금', '2025-07-07 14:30:36'),
(1028, 1029, 23000, '출금', '영화 관람', '2025-07-08 14:10:05'),
(1030, 1031, 35000, '이체_출금', '인터넷 요금', '2025-07-08 18:05:45'),
(1032, 1033, 41000, '입금', '급여 입금', '2025-07-09 09:30:40'),
(1034, 1035, 16000, '출금', '서점 구입', '2025-07-09 11:55:20'),
(1036, 1037, 39000, '이체_출금', '전기세 납부', '2025-07-10 10:35:00'),
(1038, 1039, 47000, '입금', '상여금', '2025-07-10 15:05:14'),
(1040, 1041, 26000, '출금', '점심 식사', '2025-07-11 12:10:55'),
(1042, 1043, 32000, '이체_출금', '렌트비', '2025-07-11 16:20:18'),
(1044, 1045, 43000, '입금', '보너스 지급', '2025-07-12 09:45:10'),
(1046, 1047, 21000, '출금', '커피값', '2025-07-12 11:55:55'),
(1048, 1049, 37000, '이체_출금', '보험료 납부', '2025-07-13 10:20:40'),
(1001, 1000, 48000, '입금', '대출 상환', '2025-07-13 14:30:22'),
(1003, 1002, 24000, '출금', '외식비', '2025-07-14 13:15:30'),
(1005, 1004, 33000, '이체_출금', '학원비', '2025-07-14 15:45:45'),
(1007, 1006, 46000, '입금', '급여 입금', '2025-07-15 09:05:59'),
(1009, 1008, 20000, '출금', '교통비', '2025-07-15 12:40:55'),
(1011, 1010, 34000, '이체_출금', '용돈 송금', '2025-07-16 10:25:15'),
(1013, 1012, 44000, '입금', '상여금', '2025-07-16 13:50:10'),
(1015, 1014, 28000, '출금', '점심 식사', '2025-07-17 11:35:40'),
(1017, 1016, 36000, '이체_출금', '인터넷 요금', '2025-07-17 16:05:00'),
(1019, 1018, 39000, '입금', '보너스 지급', '2025-07-18 09:45:22'),
(1021, 1020, 31000, '출금', '커피값', '2025-07-18 14:10:30'),
(1023, 1022, 47000, '이체_출금', '보험료 납부', '2025-07-19 10:50:20'),
(1025, 1024, 28000, '입금', '대출 상환', '2025-07-19 15:15:45'),
(1027, 1026, 25000, '출금', '외식비', '2025-07-20 13:30:50'),
(1029, 1028, 40000, '이체_출금', '학원비 납부', '2025-07-20 17:40:55'),
(1031, 1030, 33000, '입금', '급여 입금', '2025-07-21 08:55:15'),
(1033, 1032, 22000, '출금', '교통비', '2025-07-21 11:20:33'),
(1035, 1034, 41000, '이체_출금', '용돈 송금', '2025-07-22 09:10:10'),
(1037, 1036, 37000, '입금', '상여금', '2025-07-22 14:55:44'),
(1039, 1038, 26000, '출금', '점심 식사', '2025-07-23 12:40:55'),
(1041, 1040, 35000, '이체_출금', '인터넷 요금', '2025-07-23 16:25:00'),
(1043, 1042, 43000, '입금', '보너스 지급', '2025-07-24 09:15:15'),
(1045, 1044, 21000, '출금', '커피값', '2025-07-24 11:50:20'),
(1047, 1046, 39000, '이체_출금', '보험료 납부', '2025-07-25 10:35:10'),
(1049, 1048, 46000, '입금', '대출 상환', '2025-07-25 15:05:50'),
(1000, 1002, 27000, '출금', '외식비', '2025-07-26 13:30:40'),
(1001, 1003, 32000, '이체_출금', '학원비', '2025-07-26 17:45:33'),
(1004, 1006, 41000, '입금', '급여 입금', '2025-07-27 08:25:12'),
(1005, 1007, 18000, '출금', '교통비', '2025-07-27 11:10:50'),
(1008, 1010, 34000, '이체_출금', '용돈 송금', '2025-07-28 09:55:05'),
(1009, 1011, 44000, '입금', '상여금', '2025-07-28 14:30:45'),
(1012, 1014, 28000, '출금', '점심 식사', '2025-07-29 12:15:33'),
(1013, 1015, 36000, '이체_출금', '인터넷 요금', '2025-07-29 16:40:27'),
(1016, 1018, 39000, '입금', '보너스 지급', '2025-07-30 09:20:10'),
(1017, 1019, 31000, '출금', '커피값', '2025-07-30 14:55:55'),
(1020, 1022, 47000, '이체_출금', '보험료 납부', '2025-07-31 10:45:30'),
(1021, 1023, 28000, '입금', '대출 상환', '2025-07-31 15:10:22'),
(1071, 1001, 40000, '출금','test','2025-08-06');


select * from user;
select * from account;
select * from transaction;
